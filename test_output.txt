
> minutemeals@1.0.0 test
> jest src/vision/__tests__/multi_veg_detection.test.js Distinct Objects

FAIL src/vision/__tests__/multi_veg_detection.test.js
  Multi-Ingredient Detection Refined
    ✓ Single: Should detect single "tomato" if only tomato is present (3 ms)
    ✓ Multiple: Should detect ["tomato", "cucumber"] if both are present (1 ms)
    ✓ Visual Group Collapse: Should collapse "Peach" and "Apricot" to "Peach" if same/no object (1 ms)
    ✕ Distinct Objects in Group: Should keep both "Peach" and "Apricot" if distinct objects (1 ms)
    ✓ Complex Scene: Should detect 5 distinct items (1 ms)
    ✓ Deduplication: Should return single "tomato" if synonyms exist
    ✓ Generic Filtering: Should return "tomato" and ignore "food" (1 ms)
    ✓ No Ingredients: Should return empty if only generic

  ● Multi-Ingredient Detection Refined › Distinct Objects in Group: Should keep both "Peach" and "Apricot" if distinct objects

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 1
    Received array:  [{"name": "peach", "score": 0.9500000000000001}]

      105 |         const result = await detectIngredients('mock-uri');
      106 |         console.log('Distinct Objects Result:', JSON.stringify(result, null, 2));
    > 107 |         expect(result).toHaveLength(2);
          |                        ^
      108 |         const names = result.map(r => r.name).sort();
      109 |         expect(names).toEqual(['apricot', 'peach']);
      110 |     });

      at Object.toHaveLength (src/vision/__tests__/multi_veg_detection.test.js:107:24)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

Test Suites: 1 failed, 1 total
Tests:       1 failed, 7 passed, 8 total
Snapshots:   0 total
Time:        0.241 s, estimated 1 s
Ran all test suites matching src/vision/__tests__/multi_veg_detection.test.js|Distinct Objects.
